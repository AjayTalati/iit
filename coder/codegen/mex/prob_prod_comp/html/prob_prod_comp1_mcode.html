<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T1U3">prob_prod</span> = prob_prod_comp(<span class="var type1" id="S3T1U6">prob1</span>,<span class="var type1" id="S4T1U7">prob2</span>,<span class="var type1" id="S5T1U8">M</span>,<span class="var type1" id="S6T1U9">x0_p1</span>,<span class="var type1" id="S7T1U10">op_fb</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2"> 2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3"> 3</a></span><span class="line">coder.inline(<span class="string">'never'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5"> 5</a></span><span class="line"><span class="mxinfo" id="T2:U7"><span class="var type1" id="S9T2U19">N</span> = <span class="mxinfo" id="T2:U9">length(<span class="var type1" id="S5T1U22">M</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,7"> 7</a></span><span class="line"><span class="keyword">if</span> nargin &lt; 5</span></span>
<span class="srcline"><span class="lineno"><a href="1,8"> 8</a></span><span class="line">    <span class="var type2" id="S7T0U31">op_fb</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9"> 9</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10">10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,11">11</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T3:U11"><span class="mxinfo" id="T3:U12">isempty(<span class="var type1" id="S4T1U38">prob2</span>)</span> == <span class="mxinfo" id="T2:U14">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12">12</a></span><span class="line">    <span class="mxinfo" id="T1:U15"><span class="var type1" id="S2T1U42">prob_prod</span> = <span class="var type1" id="S3T1U43">prob1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13">13</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo" id="T3:U18"><span class="mxinfo" id="T3:U19">isempty(<span class="var type1" id="S3T1U48">prob1</span>)</span> == <span class="mxinfo" id="T2:U21">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14">14</a></span><span class="line">    <span class="mxinfo" id="T1:U22"><span class="var type1" id="S2T1U52">prob_prod</span> = <span class="var type1" id="S4T1U53">prob2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15">15</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16">16</a></span><span class="line">    <span class="mxinfo" id="T2:U25"><span class="var type1" id="S13T2U57">N1</span> = <span class="mxinfo" id="T2:U27">length(<span class="var type1" id="S6T1U60">x0_p1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17">17</a></span><span class="line">    <span class="mxinfo" id="T2:U29"><span class="var type1" id="S14T2U63">N2</span> = <span class="mxinfo" id="T2:U31"><span class="var type1" id="S9T2U65">N</span> - <span class="var type1" id="S13T2U66">N1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18">18</a></span><span class="line">    <span class="mxinfo" id="T1:U34"><span class="var type1" id="S15T1U69">x0_p1_or</span> = <span class="var type1" id="S6T1U70">x0_p1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19">19</a></span><span class="line">    <span class="mxinfo" id="T10:U37"><span class="var type1" id="S16T10U73">N_vec</span> = <span class="mxinfo" id="T10:U39">1:<span class="var type1" id="S9T2U76">N</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20">20</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S17T2U79">i</span>=<span class="mxinfo" id="T20:U42"><span class="mxinfo" id="T2:U43">1</span>: <span class="var type1" id="S13T2U82">N1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21">21</a></span><span class="line">        <span class="mxinfo" id="T2:U45"><span class="mxinfo" id="T2:U46"><span class="var type1" id="S6T1U86">x0_p1</span>(<span class="var type1" id="S17T2U87">i</span>)</span> = <span class="mxinfo" id="T20:U49"><span class="var type1" id="S16T10U89">N_vec</span>(<span class="mxinfo" id="T11:U51"><span class="var type1" id="S5T1U91">M</span>==<span class="mxinfo" id="T2:U53"><span class="var type1" id="S15T1U93">x0_p1_or</span>(<span class="var type1" id="S17T2U94">i</span>)</span></span>)</span></span>; <span class="comment">% re-index of x0_p1 in terms of M</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22">22</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23">23</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,24">24</a></span><span class="line">    <span class="mxinfo" id="T10:U56"><span class="var type1" id="S18T10U97">x0_p2_test</span> = <span class="mxinfo" id="T10:U58">1:<span class="var type1" id="S14T2U100">N2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25">25</a></span><span class="line">    <span class="mxinfo" id="T2:U60"><span class="var type1" id="S19T2U103">j</span> = <span class="mxinfo" id="T2:U62">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26">26</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S17T2U107">i</span> = <span class="mxinfo" id="T20:U64"><span class="mxinfo" id="T2:U65">1</span>:<span class="var type1" id="S9T2U110">N</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27">27</a></span><span class="line">        <span class="mxinfo" id="T17:U67"><span class="var type1" id="S20T17U113">test</span> = <span class="mxinfo" id="T17:U69">all(<span class="mxinfo" id="T11:U70"><span class="var type1" id="S6T1U117">x0_p1</span> ~= <span class="var type1" id="S17T2U118">i</span></span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,28">28</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T17:U73"><span class="var type1" id="S20T17U121"><span class="message error" id="M1F1C">test</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29">29</a></span><span class="line">            <span class="mxinfo" id="T2:U74"><span class="mxinfo" id="T2:U75"><span class="var type1" id="S18T10U125">x0_p2_test</span>(<span class="var type1" id="S19T2U126">j</span>)</span> = <span class="var type1" id="S17T2U127">i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30">30</a></span><span class="line">            <span class="mxinfo" id="T2:U79"><span class="var type1" id="S19T2U130">j</span> = <span class="mxinfo" id="T2:U81"><span class="var type1" id="S19T2U132">j</span>+<span class="mxinfo" id="T2:U83">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31">31</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32">32</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,33">33</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,34">34</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,35">35</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T11:U84"><span class="message error" id="M2F1C"><span class="var type1" id="S7T1U137">op_fb</span> == <span class="mxinfo" id="T2:U86">3</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,36">36</a></span><span class="line">        <span class="mxinfo" id="T1:U87"><span class="var type1" id="S22T1U141">prob1_s</span> = <span class="mxinfo" id="T1:U89">reshape(<span class="var type1" id="S3T1U144">prob1</span>,<span class="mxinfo" id="T16:U91">[<span class="mxinfo" id="T2:U92"><span class="mxinfo" id="T2:U93">2</span>^<span class="var type1" id="S13T2U149">N1</span></span> <span class="mxinfo" id="T2:U95"><span class="mxinfo" id="T2:U96">2</span>^<span class="var type1" id="S13T2U152">N1</span></span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37">37</a></span><span class="line">        <span class="mxinfo" id="T1:U98"><span class="var type1" id="S24T1U155">prob2_s</span> = <span class="mxinfo" id="T1:U100">reshape(<span class="var type1" id="S4T1U158">prob2</span>,<span class="mxinfo" id="T16:U102">[<span class="mxinfo" id="T2:U103"><span class="mxinfo" id="T2:U104">2</span>^<span class="var type1" id="S14T2U163">N2</span></span> <span class="mxinfo" id="T2:U106"><span class="mxinfo" id="T2:U107">2</span>^<span class="var type1" id="S14T2U166">N2</span></span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38">38</a></span><span class="line">        <span class="mxinfo" id="T1:U109"><span class="var type1" id="S2T1U169">prob_prod</span> = <span class="mxinfo" id="T1:U111">zeros(<span class="mxinfo" id="T2:U112"><span class="mxinfo" id="T2:U113">2</span>^<span class="var type1" id="S9T2U174">N</span></span>,<span class="mxinfo" id="T2:U115"><span class="mxinfo" id="T2:U116">2</span>^<span class="var type1" id="S9T2U177">N</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,39">39</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S17T2U180">i</span> = <span class="mxinfo" id="T20:U119"><span class="mxinfo" id="T2:U120">1</span>:<span class="mxinfo" id="T2:U121"><span class="mxinfo" id="T2:U122">2</span>^<span class="var type1" id="S9T2U185">N</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40">40</a></span><span class="line">            <span class="var type0" id="S26T0U188">xp_bs</span> = <span class="message error" id="M3F1C"><span class="mxinfo" id="T21:U124">trans2</span>(<span class="mxinfo" id="T2:U125"><span class="var type1" id="S17T2U192">i</span>-<span class="mxinfo" id="T2:U127">1</span></span>,<span class="var type1" id="S9T2U194">N</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41">41</a></span><span class="line">            <span class="var type0" id="S28T0U197">xp_bs1</span> = <span class="var type0" id="S26T0U199"><span class="message error" id="M4F1C">xp_bs</span></span>(<span class="var type2" id="S6T0U200">x0_p1</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,42">42</a></span><span class="line">            <span class="var type0" id="S29T0U203">xp_bs2</span> = <span class="var type0" id="S26T0U205"><span class="message error" id="M5F1C">xp_bs</span></span>(x0_p2);</span></span>
<span class="srcline"><span class="lineno"><a href="1,43">43</a></span><span class="line">            <span class="var type0" id="S31T0U210">xp_i1</span> = <span class="mxinfo" id="T22:U129">trans10</span>(<span class="var type0" id="S28T0U213"><span class="message error" id="M6F1C">xp_bs1</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,44">44</a></span><span class="line">            <span class="var type0" id="S33T0U216">xp_i2</span> = <span class="mxinfo" id="T23:U130">trans10</span>(<span class="var type0" id="S29T0U219"><span class="message error" id="M7F1C">xp_bs2</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,45">45</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S19T2U222">j</span>=<span class="mxinfo" id="T20:U132"><span class="mxinfo" id="T2:U133">1</span>: <span class="mxinfo" id="T2:U134"><span class="mxinfo" id="T2:U135">2</span>^<span class="var type1" id="S9T2U227">N</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46">46</a></span><span class="line">                <span class="var type0" id="S34T0U230">xf_bs</span> = <span class="message error" id="M8F1C"><span class="mxinfo" id="T24:U137">trans2</span>(<span class="mxinfo" id="T2:U138"><span class="var type1" id="S19T2U234">j</span>-<span class="mxinfo" id="T2:U140">1</span></span>,<span class="var type1" id="S9T2U236">N</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47">47</a></span><span class="line">                <span class="var type0" id="S35T0U239">xf_bs1</span> = <span class="var type0" id="S34T0U241"><span class="message error" id="M9F1C">xf_bs</span></span>(<span class="var type2" id="S6T0U242">x0_p1</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,48">48</a></span><span class="line">                <span class="var type0" id="S36T0U245">xf_bs2</span> = <span class="var type0" id="S34T0U247"><span class="message error" id="M10F1C">xf_bs</span></span>(x0_p2);</span></span>
<span class="srcline"><span class="lineno"><a href="1,49">49</a></span><span class="line">                <span class="var type0" id="S37T0U252">xf_i1</span> = <span class="mxinfo" id="T25:U142">trans10</span>(<span class="var type0" id="S35T0U255"><span class="message error" id="M11F1C">xf_bs1</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,50">50</a></span><span class="line">                <span class="var type0" id="S38T0U258">xf_i2</span> = <span class="mxinfo" id="T26:U143">trans10</span>(<span class="var type0" id="S36T0U261"><span class="message error" id="M12F1C">xf_bs2</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,51">51</a></span><span class="line">                <span class="var type2" id="S2T0U265">prob_prod</span>(<span class="var type2" id="S17T0U266">i</span>,<span class="var type2" id="S19T0U267">j</span>) = <span class="mxinfo" id="T27:U144"><span class="var type1" id="S22T1U270">prob1_s</span>(<span class="var type0" id="S31T0U271"><span class="message error" id="M13F1C">xp_i1</span></span>,<span class="var type0" id="S37T0U272">xf_i1</span>)*<span class="var type2" id="S24T0U274">prob2_s</span>(<span class="var type0" id="S33T0U275">xp_i2</span>,<span class="var type0" id="S38T0U276">xf_i2</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52">52</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,53">53</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,54">54</a></span><span class="line">        <span class="mxinfo" id="T1:U146"><span class="var type1" id="S2T1U279">prob_prod</span> = <span class="mxinfo" id="T20:U148"><span class="var type1" id="S2T1U281">prob_prod</span>(:)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55">55</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,56">56</a></span><span class="line">        <span class="mxinfo" id="T1:U150"><span class="var type1" id="S2T1U286">prob_prod</span> = <span class="mxinfo" id="T20:U152">zeros(<span class="mxinfo" id="T2:U153"><span class="mxinfo" id="T2:U154">2</span>^<span class="var type1" id="S9T2U291">N</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57">57</a></span><span class="line">        <span class="mxinfo" id="T20:U156"><span class="var type1" id="S39T20U295">x0_bs</span> = <span class="mxinfo" id="T20:U158">zeros(<span class="var type1" id="S9T2U298">N</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58">58</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S17T2U302">i</span>=<span class="mxinfo" id="T20:U161"><span class="mxinfo" id="T2:U162">1</span>: <span class="mxinfo" id="T2:U163"><span class="mxinfo" id="T2:U164">2</span>^<span class="var type1" id="S13T2U307">N1</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,59">59</a></span><span class="line">            <span class="var type0" id="S40T0U310">x0_bs1</span> = <span class="message error" id="M14F1C"><span class="mxinfo" id="T28:U166">trans2</span>(<span class="mxinfo" id="T2:U167"><span class="var type1" id="S17T2U314">i</span>-<span class="mxinfo" id="T2:U169">1</span></span>,<span class="var type1" id="S13T2U316">N1</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60">60</a></span><span class="line">            <span class="var type2" id="S39T0U320">x0_bs</span>(<span class="var type2" id="S6T0U321">x0_p1</span>) = <span class="var type0" id="S40T0U322"><span class="message error" id="M15F1C">x0_bs1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,61">61</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S19T2U325">j</span>=<span class="mxinfo" id="T20:U172"><span class="mxinfo" id="T2:U173">1</span>: <span class="mxinfo" id="T2:U174"><span class="mxinfo" id="T2:U175">2</span>^<span class="var type1" id="S14T2U330">N2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62">62</a></span><span class="line">                <span class="var type0" id="S41T0U333">x0_bs2</span> = <span class="message error" id="M16F1C"><span class="mxinfo" id="T29:U177">trans2</span>(<span class="mxinfo" id="T2:U178"><span class="var type1" id="S19T2U337">j</span>-<span class="mxinfo" id="T2:U180">1</span></span>,<span class="var type1" id="S14T2U339">N2</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,63">63</a></span><span class="line">                <span class="var type2" id="S39T0U343">x0_bs</span>(x0_p2) = <span class="var type0" id="S41T0U346"><span class="message error" id="M17F1C">x0_bs2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64">64</a></span><span class="line">                <span class="var type0" id="S42T0U349">x0_i</span> = <span class="message error" id="M18F1C"><span class="mxinfo" id="T30:U182">trans10</span>(<span class="var type1" id="S39T20U352">x0_bs</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65">65</a></span><span class="line">                <span class="var type1" id="S2T1U356">prob_prod</span>(<span class="var type0" id="S42T0U357"><span class="message error" id="M19F1C">x0_i</span></span>) = <span class="mxinfo" id="T2:U185"><span class="mxinfo" id="T2:U186"><span class="var type1" id="S3T1U360">prob1</span>(<span class="var type1" id="S17T2U361">i</span>)</span>*<span class="mxinfo" id="T2:U189"><span class="var type1" id="S4T1U363">prob2</span>(<span class="var type1" id="S19T2U364">j</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,66">66</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67">67</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68">68</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,69">69</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,70">70</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
