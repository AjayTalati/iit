<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of iit</title>
  <meta name="keywords" content="iit">
  <meta name="description" content="VERSION v0.04 - 11.14.2012">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">iit</a> &gt; iit.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for iit&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>iit
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>VERSION v0.04 - 11.14.2012</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = iit(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">VERSION v0.04 - 11.14.2012</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="confirm_def_switch.html" class="code" title="function varargout = confirm_def_switch(varargin)">confirm_def_switch</a>	CONFIRM_DEF_SWITCH MATLAB code for confirm_def_switch.fig</li><li><a href="confirm_tpm_switch.html" class="code" title="function varargout = confirm_tpm_switch(varargin)">confirm_tpm_switch</a>	CONFIRM_TPM_SWITCH MATLAB code for confirm_tpm_switch.fig</li><li><a href="cpt_factory_tpm.html" class="code" title="function cpt = cpt_factory_tpm(this_node, inputs, nodes, num_total_nodes, tpm)">cpt_factory_tpm</a>	THIS FUNCTION CURRENTLY ONLY WORKS FOR BINARY NODES!</li><li><a href="iit_run.html" class="code" title="function iit_run(tpm, in_connect_mat, current_state, in_noise, in_options, in_nodes, past_state)">iit_run</a>	IIT_RUN Computes concepts, small and big phi, and partition information</li><li><a href="isposintscalar.html" class="code" title="function r = isposintscalar(s)">isposintscalar</a>	ispostintscalar Check if input vector is positive scalar.</li><li><a href="logic_gates.html" class="code" title="function output = logic_gates(input,logic_type,in_noise)">logic_gates</a>	LOGIC_GATES the probability an element will turn on given the inputs</li><li><a href="state2index.html" class="code" title="function index = state2index(state_vec, num_states_vec)">state2index</a>	</li><li><a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>	TRANS2(VALUE,LENGTH) returns an array of LENGTH 0's and 1's, representing</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function iit_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = iit_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function num_nodes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function num_nodes_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function net_definition_method_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function net_definition_method_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function updateTPMview(handles, tpm_choice)</a></li><li><a href="#_sub8" class="code">function updateCurrentStateView(handles)</a></li><li><a href="#_sub9" class="code">function updatePastStateView(handles)</a></li><li><a href="#_sub10" class="code">function view_select_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function view_select_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function run_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function noise_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function noise_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function TPM_CellEditCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function cur_state_CellEditCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function past_state_CellEditCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function upload_tpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function tpm_type_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function tpm_type_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function NetworkDefinition_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function connectivity_mat_CellEditCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function upload_connectivity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function updateConnectivityView(handles)</a></li><li><a href="#_sub25" class="code">function logic_types_CellEditCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function update_tpm_from_connections_logic(handles)</a></li><li><a href="#_sub27" class="code">function updateLogicTypesView(handles)</a></li><li><a href="#_sub28" class="code">function state_option_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function state_option_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function externalnodes_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function externalnodes_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function big_phi_alg_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function big_phi_alg_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function big_phi_func_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function big_phi_func_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function small_phi_func_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function small_phi_func_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function complex_option_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function complex_option_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function normalization_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function normalization_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function parallel_option_menu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function parallel_option_menu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function save_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function load_button_Callback(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%VERSION v0.04 - 11.14.2012</span>
0002 
0003 <a name="_sub0" href="#_subfunctions" class="code">function varargout = iit(varargin)</a>
0004 <span class="comment">% IIT MATLAB code for iit.fig</span>
0005 <span class="comment">%      IIT, by itself, creates a new IIT or raises the existing</span>
0006 <span class="comment">%      singleton*.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%      H = IIT returns the handle to a new IIT or the handle to</span>
0009 <span class="comment">%      the existing singleton*.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%      IIT('CALLBACK',hObject,eventData,handles,...) calls the local</span>
0012 <span class="comment">%      function named CALLBACK in IIT.M with the given input arguments.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">%      IIT('Property','Value',...) creates a new IIT or raises the</span>
0015 <span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
0016 <span class="comment">%      applied to the GUI before iit_OpeningFcn gets called.  An</span>
0017 <span class="comment">%      unrecognized property name or invalid value makes property application</span>
0018 <span class="comment">%      stop.  All inputs are passed to iit_OpeningFcn via varargin.</span>
0019 <span class="comment">%</span>
0020 <span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one</span>
0021 <span class="comment">%      instance to run (singleton)&quot;.</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>
0024 
0025 <span class="comment">% Edit the above text to modify the response to help iit</span>
0026 
0027 <span class="comment">% Last Modified by GUIDE v2.5 11-Jan-2013 15:14:26</span>
0028 
0029 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0030 gui_Singleton = 1;
0031 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0032                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0033                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction iit_OpeningFcn(hObject, eventdata, handles, varargin)">iit_OpeningFcn</a>, <span class="keyword">...</span>
0034                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = iit_OutputFcn(hObject, eventdata, handles)">iit_OutputFcn</a>, <span class="keyword">...</span>
0035                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0036                    <span class="string">'gui_Callback'</span>,   []);
0037 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0038     gui_State.gui_Callback = str2func(varargin{1});
0039 <span class="keyword">end</span>
0040 
0041 <span class="keyword">if</span> nargout
0042     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0043 <span class="keyword">else</span>
0044     gui_mainfcn(gui_State, varargin{:});
0045 <span class="keyword">end</span>
0046 <span class="comment">% End initialization code - DO NOT EDIT</span>
0047 
0048 
0049 <span class="comment">% --- Executes just before iit is made visible.</span>
0050 <a name="_sub1" href="#_subfunctions" class="code">function iit_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0051 <span class="comment">% This function has no output args, see OutputFcn.</span>
0052 <span class="comment">% hObject    handle to figure</span>
0053 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0054 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0055 <span class="comment">% varargin   command line arguments to iit (see VARARGIN)</span>
0056 
0057 <span class="comment">% Choose default command line output for iit</span>
0058 handles.output = hObject;
0059 
0060 <span class="comment">% Update handles structure</span>
0061 guidata(hObject, handles);
0062 
0063 <span class="comment">% Set initial View</span>
0064 set(handles.Options,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0065 set(handles.connectivity_mat,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0066 set(handles.connect_mat_title,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0067 set(handles.logic_types,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0068 set(handles.logic_text,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0069 set(handles.noise,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0070 set(handles.noise_text,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0071 
0072 <span class="comment">% UIWAIT makes iit wait for user response (see UIRESUME)</span>
0073 <span class="comment">% uiwait(handles.figure1);</span>
0074 
0075 
0076 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0077 <a name="_sub2" href="#_subfunctions" class="code">function varargout = iit_OutputFcn(hObject, eventdata, handles) </a>
0078 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 
0083 <span class="comment">% Get default command line output from handles structure</span>
0084 varargout{1} = handles.output;
0085 
0086 <span class="comment">%--------------------------------------------------------------------------</span>
0087 <a name="_sub3" href="#_subfunctions" class="code">function num_nodes_Callback(hObject, eventdata, handles)</a>
0088 <span class="comment">% hObject    handle to num_nodes (see GCBO)</span>
0089 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0090 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0091 
0092 <span class="comment">% Hints: get(hObject,'String') returns contents of num_nodes as text</span>
0093 <span class="comment">%        str2double(get(hObject,'String')) returns contents of num_nodes as a double</span>
0094 
0095 <span class="keyword">if</span> isnan(str2double(get(hObject,<span class="string">'String'</span>))) || ~<a href="isposintscalar.html" class="code" title="function r = isposintscalar(s)">isposintscalar</a>(str2double(get(hObject,<span class="string">'String'</span>)))
0096 
0097     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Number of nodes must be a positive integer.'</span>);
0098     set(hObject,<span class="string">'String'</span>,num2str(size(get(handles.TPM,<span class="string">'Data'</span>),1)));
0099     
0100 <span class="keyword">else</span>
0101     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0102     tpm_choices = cellstr(get(handles.tpm_type_menu,<span class="string">'String'</span>));
0103     tpm_choice = tpm_choices{get(handles.tpm_type_menu,<span class="string">'Value'</span>)};
0104     <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles, tpm_choice)
0105     <a href="#_sub8" class="code" title="subfunction updateCurrentStateView(handles)">updateCurrentStateView</a>(handles)
0106     <a href="#_sub9" class="code" title="subfunction updatePastStateView(handles)">updatePastStateView</a>(handles)
0107     <a href="#_sub27" class="code" title="subfunction updateLogicTypesView(handles)">updateLogicTypesView</a>(handles)
0108     <a href="#_sub24" class="code" title="subfunction updateConnectivityView(handles)">updateConnectivityView</a>(handles)
0109 <span class="keyword">end</span>
0110 
0111 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0112 <a name="_sub4" href="#_subfunctions" class="code">function num_nodes_CreateFcn(hObject, eventdata, handles)</a>
0113 <span class="comment">% hObject    handle to num_nodes (see GCBO)</span>
0114 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0115 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0116 
0117 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0118 <span class="comment">%       See ISPC and COMPUTER.</span>
0119 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0120     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0121 <span class="keyword">end</span>
0122 <span class="comment">%--------------------------------------------------------------------------</span>
0123 
0124 <span class="comment">%--------------------------------------------------------------------------</span>
0125 <span class="comment">% --- Executes on selection change in net_definition_method.</span>
0126 <a name="_sub5" href="#_subfunctions" class="code">function net_definition_method_Callback(hObject, eventdata, handles)</a>
0127 <span class="comment">% hObject    handle to net_definition_method (see GCBO)</span>
0128 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0129 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0130 
0131 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns net_definition_method contents as cell array</span>
0132 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from net_definition_method</span>
0133 
0134 contents = cellstr(get(hObject,<span class="string">'String'</span>));
0135 selection = contents{get(hObject,<span class="string">'Value'</span>)};
0136 
0137 <span class="keyword">if</span> strcmp(selection,<span class="string">'TPM / Connections'</span>)
0138     
0139     set(handles.TPM,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
0140     set(handles.logic_types,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
0141     set(handles.noise,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
0142     
0143 <span class="keyword">elseif</span> strcmp(selection,<span class="string">'Connections / Logic Mechanisms'</span>)
0144     
0145     user_response = <a href="confirm_def_switch.html" class="code" title="function varargout = confirm_def_switch(varargin)">confirm_def_switch</a>(<span class="string">'Title'</span>,<span class="string">'Confirm Definition Change'</span>);
0146     
0147     <span class="keyword">switch</span> lower(user_response)
0148         <span class="keyword">case</span> <span class="string">'no'</span>
0149             <span class="keyword">return</span>
0150         <span class="keyword">case</span> <span class="string">'yes'</span>
0151             set(handles.TPM,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
0152             set(handles.logic_types,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
0153             set(handles.noise,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
0154             <a href="#_sub26" class="code" title="subfunction update_tpm_from_connections_logic(handles)">update_tpm_from_connections_logic</a>(handles)
0155             <a href="#_sub19" class="code" title="subfunction tpm_type_menu_Callback(hObject, eventdata, handles)">tpm_type_menu_Callback</a>(handles.tpm_type_menu, eventdata, handles)
0156     <span class="keyword">end</span>    
0157 <span class="keyword">end</span>
0158 
0159 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0160 <a name="_sub6" href="#_subfunctions" class="code">function net_definition_method_CreateFcn(hObject, eventdata, handles)</a>
0161 <span class="comment">% hObject    handle to net_definition_method (see GCBO)</span>
0162 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0163 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0164 
0165 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0166 <span class="comment">%       See ISPC and COMPUTER.</span>
0167 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0168     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0169 <span class="keyword">end</span>
0170 <span class="comment">%--------------------------------------------------------------------------</span>
0171 
0172 <span class="comment">%--------------------------------------------------------------------------</span>
0173 <span class="comment">% redraw the TPM based on current settings</span>
0174 <a name="_sub7" href="#_subfunctions" class="code">function updateTPMview(handles, tpm_choice)</a>
0175 
0176 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0177 
0178 tpm_old = get(handles.TPM,<span class="string">'Data'</span>);
0179 tpm_size_old = size(tpm_old,2);
0180 
0181 <span class="keyword">if</span> strcmp(tpm_choice,<span class="string">'State X State'</span>)
0182     <span class="comment">% update TPM</span>
0183     tpm_size_new = 2^nNodes;
0184     <span class="comment">% increase size</span>
0185     <span class="keyword">if</span> tpm_size_new &gt; tpm_size_old
0186         tpm_new = eye(tpm_size_new);
0187         tpm_new(1:size(tpm_old,1),1:size(tpm_old,2)) = tpm_old;
0188     <span class="comment">% decrease size</span>
0189     <span class="keyword">else</span>
0190         <span class="comment">% resize</span>
0191         tpm_new = tpm_old(1:tpm_size_new,1:tpm_size_new);
0192     <span class="keyword">end</span>
0193 
0194     set(handles.TPM,<span class="string">'Data'</span>,tpm_new);
0195     <span class="comment">% rename cols and rows</span>
0196     names = cell(1,tpm_size_new);
0197     <span class="keyword">for</span> i = 1:tpm_size_new
0198         names{i} = char(<a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(i-1,nNodes)'+<span class="string">'0'</span>);
0199     <span class="keyword">end</span>
0200     set(handles.TPM,<span class="string">'ColumnName'</span>,names,<span class="string">'RowName'</span>,names);
0201     set(handles.TPM,<span class="string">'ColumnEditable'</span>,true(1,tpm_size_new));
0202 
0203 <span class="keyword">elseif</span> strcmp(tpm_choice,<span class="string">'State X Node'</span>) 
0204     <span class="keyword">if</span> nNodes &gt; tpm_size_old
0205         tpm_new = zeros(2^nNodes,nNodes);
0206         tpm_new(1:2^tpm_size_old,1:tpm_size_old) = tpm_old;
0207     <span class="keyword">else</span>
0208         tpm_new = tpm_old(1:2^nNodes,1:nNodes);
0209     <span class="keyword">end</span>
0210     set(handles.TPM,<span class="string">'Data'</span>,tpm_new);
0211     row_names = cell(1,2^nNodes);
0212     <span class="keyword">for</span> i = 1:2^nNodes
0213         row_names{i} = char(<a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(i-1,nNodes)'+<span class="string">'0'</span>);
0214     <span class="keyword">end</span>
0215     set(handles.TPM,<span class="string">'RowName'</span>,row_names);
0216     col_names = cell(1,nNodes);
0217     <span class="keyword">for</span> i = 1:nNodes
0218         col_names{i} = num2str(i);
0219     <span class="keyword">end</span>
0220     set(handles.TPM,<span class="string">'ColumnName'</span>,col_names);
0221     set(handles.TPM,<span class="string">'ColumnEditable'</span>,true(1,nNodes));
0222 <span class="keyword">end</span>  
0223     
0224 
0225 <span class="comment">% redraw the current state based on new input</span>
0226 <a name="_sub8" href="#_subfunctions" class="code">function updateCurrentStateView(handles)</a>
0227 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0228 <span class="comment">% update current state table</span>
0229 cur_state_old = get(handles.cur_state,<span class="string">'Data'</span>);
0230 cur_state_size_old = length(cur_state_old);
0231 <span class="comment">% increase size</span>
0232 <span class="keyword">if</span> nNodes &gt; cur_state_size_old
0233     cur_state_new = zeros(1,nNodes);
0234     cur_state_new(1:cur_state_size_old) = cur_state_old;
0235 <span class="comment">% decrease size</span>
0236 <span class="keyword">else</span>
0237     cur_state_new = cur_state_old(1:nNodes);
0238 <span class="keyword">end</span>
0239 set(handles.cur_state,<span class="string">'Data'</span>,cur_state_new);
0240 set(handles.cur_state,<span class="string">'ColumnEditable'</span>,true(1,nNodes));
0241 
0242 <span class="comment">% redraw the past state based on new input Larissa: only for Freeze option</span>
0243 <a name="_sub9" href="#_subfunctions" class="code">function updatePastStateView(handles)</a>
0244 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0245 <span class="comment">% update current state table</span>
0246 past_state_old = get(handles.past_state,<span class="string">'Data'</span>);
0247 past_state_size_old = length(past_state_old);
0248 <span class="comment">% increase size</span>
0249 <span class="keyword">if</span> nNodes &gt; past_state_size_old
0250     past_state_new = zeros(1,nNodes);
0251     past_state_new(1:past_state_size_old) = past_state_old;
0252 <span class="comment">% decrease size</span>
0253 <span class="keyword">else</span>
0254     past_state_new = past_state_old(1:nNodes);
0255 <span class="keyword">end</span>
0256 set(handles.past_state,<span class="string">'Data'</span>,past_state_new);
0257 set(handles.past_state,<span class="string">'ColumnEditable'</span>,true(1,nNodes));
0258 <span class="comment">%--------------------------------------------------------------------------</span>
0259 
0260 <span class="comment">%--------------------------------------------------------------------------</span>
0261 <span class="comment">% --- Executes on selection change in view_select.</span>
0262 <a name="_sub10" href="#_subfunctions" class="code">function view_select_Callback(hObject, eventdata, handles)</a>
0263 <span class="comment">% hObject    handle to view_select (see GCBO)</span>
0264 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0265 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0266 
0267 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns view_select contents as cell array</span>
0268 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from view_select</span>
0269 
0270 view_choices = cellstr(get(hObject,<span class="string">'String'</span>));
0271 <span class="comment">% turn all views off</span>
0272 <span class="keyword">for</span> i = 1:length(view_choices)
0273     this_view = view_choices{i}(view_choices{i} ~= <span class="string">' '</span>);
0274     eval([<span class="string">'set(handles.'</span> this_view <span class="string">',''Visible'',''Off'')'</span>])
0275 <span class="keyword">end</span>
0276 <span class="comment">% turn selected view on</span>
0277 selection = view_choices{get(hObject,<span class="string">'Value'</span>)};
0278 selection = selection(selection ~= <span class="string">' '</span>);
0279 eval([<span class="string">'set(handles.'</span> selection <span class="string">',''Visible'',''On'')'</span>])
0280 
0281 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0282 <a name="_sub11" href="#_subfunctions" class="code">function view_select_CreateFcn(hObject, eventdata, handles)</a>
0283 <span class="comment">% hObject    handle to view_select (see GCBO)</span>
0284 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0285 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0286 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0287 <span class="comment">%       See ISPC and COMPUTER.</span>
0288 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0289     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0290 <span class="keyword">end</span>
0291 <span class="comment">%--------------------------------------------------------------------------</span>
0292 
0293 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0294 <span class="comment">% RUN PROGRAM                                                             %</span>
0295 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0296 <span class="comment">%--------------------------------------------------------------------------</span>
0297 <span class="comment">% --- Executes on button press in run_button.</span>
0298 <a name="_sub12" href="#_subfunctions" class="code">function run_button_Callback(hObject, eventdata, handles)</a>
0299 <span class="comment">% hObject    handle to run_button (see GCBO)</span>
0300 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0301 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0302 
0303 <span class="comment">% THIS WILL GET CHANGED WHEN OPTIONS ARE NAILED DOWN</span>
0304 optionVector_phi = [2,1,0,3];
0305 op_big_phi = optionVector_phi(get(handles.big_phi_alg_menu,<span class="string">'Value'</span>));
0306 
0307 op_normalize = get(handles.normalization_menu,<span class="string">'Value'</span>);
0308 op_normalize_small_phi = 0;
0309 op_normalize_big_phi = 0;
0310 <span class="keyword">if</span> op_normalize == 2 || op_normalize == 3
0311     op_normalize_small_phi = 1;
0312 <span class="keyword">end</span>
0313 <span class="keyword">if</span> op_normalize == 2 || op_normalize == 4
0314     op_normalize_big_phi = 1;
0315 <span class="keyword">end</span>
0316 
0317 op_complex = get(handles.complex_option_menu,<span class="string">'Value'</span>);
0318 <span class="keyword">if</span> op_complex == 2
0319     op_complex = 0;
0320 <span class="keyword">end</span>
0321 
0322 op_small_phi = optionVector_phi(get(handles.small_phi_func_menu,<span class="string">'Value'</span>));
0323 op_ave = 0;
0324 <span class="comment">%op_ave = get(handles.state_option_menu,'Value') - 1;</span>
0325 op_parallel = get(handles.parallel_option_menu,<span class="string">'Value'</span>) - 1;
0326 op_parfor = get(handles.parfor_option_menu,<span class="string">'Value'</span>);
0327 op_strongconn = get(handles.StrongConn_option_menu,<span class="string">'Value'</span>) - 1;
0328 op_extNodes = get(handles.ExtNodes_option_menu,<span class="string">'Value'</span>) - 1;
0329 
0330 options = [op_parallel op_ave op_complex op_small_phi op_big_phi op_normalize_small_phi <span class="keyword">...</span>
0331            op_normalize_big_phi 0 op_parfor op_strongconn op_extNodes 1 1 0 0 1 1 0];
0332        
0333 <span class="comment">%Larissa: not necessary</span>
0334 <span class="comment">% tpm_choices = cellstr(get(handles.tpm_type_menu,'String'));</span>
0335 <span class="comment">% tpm_choice = tpm_choices{get(handles.tpm_type_menu,'Value')};</span>
0336 
0337 tpm = get(handles.TPM,<span class="string">'Data'</span>);
0338 num_states = size(tpm,1);
0339 num_nodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0340 
0341 <span class="comment">% LARISSA: CHANGE THIS IF TPM STATExSTATE SHOULD BE USED EXPLICITELY</span>
0342 <span class="keyword">if</span> size(tpm,2) == num_states   
0343     new_tpm = zeros(num_states,num_nodes);
0344     <span class="keyword">for</span> i = 1:num_states
0345         <span class="keyword">for</span> j = 1:num_nodes
0346             <span class="keyword">for</span> k = 1:num_states
0347                 state = char(<a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(k-1,num_nodes)'+<span class="string">'0'</span>);
0348                 <span class="keyword">if</span> strcmp(state(j),<span class="string">'1'</span>)
0349                     new_tpm(i,j) = new_tpm(i,j) + tpm(i,k);
0350                 <span class="keyword">end</span>
0351             <span class="keyword">end</span>
0352         <span class="keyword">end</span>
0353     <span class="keyword">end</span>    
0354     tpm = new_tpm;
0355 <span class="keyword">end</span>
0356 
0357 current_state = get(handles.cur_state,<span class="string">'Data'</span>)';
0358 <span class="keyword">if</span> op_extNodes == 0
0359     <span class="comment">% Larissa: Check if past_state could be past state of present state!!</span>
0360     past_state = get(handles.past_state,<span class="string">'Data'</span>);
0361     past_index = <a href="state2index.html" class="code" title="function index = state2index(state_vec, num_states_vec)">state2index</a>(past_state,2.*ones(size(past_state)));
0362     <span class="keyword">if</span> size(tpm,2) == num_states
0363         current_index = <a href="state2index.html" class="code" title="function index = state2index(state_vec, num_states_vec)">state2index</a>(current_state,2.*ones(size(past_state)));
0364         state_reachable = tpm(past_index, current_index) &gt; 0;
0365     <span class="keyword">else</span>
0366         pot_current = tpm(past_index,:);
0367         determined_elements = sort(setxor(find(pot_current), find(pot_current-1))); <span class="comment">%So that it works for noise, too</span>
0368         state_reachable = isequal(logical(pot_current(determined_elements)), logical(current_state(determined_elements))');
0369     <span class="keyword">end</span>
0370     
0371     <span class="keyword">if</span> state_reachable == 0
0372         set(handles.warning,<span class="string">'String'</span>,<span class="string">'Current and past state are not congruent!'</span>);
0373         <span class="keyword">return</span>;
0374     <span class="keyword">else</span>
0375         set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0376     <span class="keyword">end</span> 
0377 <span class="keyword">else</span>
0378     past_state = [];
0379 <span class="keyword">end</span>    
0380 noise = str2double(get(handles.noise,<span class="string">'String'</span>));
0381 
0382 connectivity_matrix = get(handles.connectivity_mat,<span class="string">'Data'</span>);
0383 
0384 <span class="comment">% setup node strucs and cpts for each node</span>
0385 <span class="comment">%inputs = struct('num',{1 2},'name',{'A_p' 'B_p'},'num_states',{2 2},'state_names',{{'0' '1'}},'logic_type',{2 3})</span>
0386 
0387 <span class="comment">%Larissa: This should not be tpm_choice, but check if logic gates are</span>
0388 <span class="comment">%activated or not! Though it shouldn't matter much</span>
0389 Net_definitions = cellstr(get(handles.net_definition_method,<span class="string">'String'</span>));
0390 Net_def_selection = Net_definitions{get(handles.net_definition_method,<span class="string">'Value'</span>)};
0391 
0392 <span class="keyword">if</span> strcmp(Net_def_selection, Net_definitions(2)) == 1
0393 <span class="comment">%if strcmp(tpm_choice, tpm_choices(3)) == 1</span>
0394     logic_types = num2cell(get(handles.logic_types,<span class="string">'Data'</span>));
0395 <span class="keyword">else</span>
0396     logic_types = cell(num_nodes,1);
0397 <span class="keyword">end</span>    
0398 <span class="comment">% init struct array</span>
0399 nodes(2*num_nodes) = struct(<span class="string">'num'</span>,2*num_nodes,<span class="string">'name'</span>,[num2str(num_nodes) <span class="string">'_c'</span>],<span class="string">'num_states'</span>,2,<span class="keyword">...</span>
0400                             <span class="string">'state_names'</span>,{{<span class="string">'0'</span> <span class="string">'1'</span>}},<span class="string">'logic_type'</span>,logic_types{num_nodes},<span class="string">'cpt'</span>,[],<span class="keyword">...</span>
0401                             <span class="string">'num_sys_nodes'</span>,num_nodes,<span class="string">'input_nodes'</span>,[]);                        
0402 <span class="comment">% make past node structs</span>
0403 <span class="keyword">for</span> i = 1:num_nodes   
0404     nodes(i) = struct(<span class="string">'num'</span>,i,<span class="string">'name'</span>,[num2str(i) <span class="string">'_p'</span>],<span class="string">'num_states'</span>,2,<span class="keyword">...</span>
0405                             <span class="string">'state_names'</span>,{{<span class="string">'0'</span> <span class="string">'1'</span>}},<span class="string">'logic_type'</span>,logic_types{i},<span class="string">'cpt'</span>,[],<span class="keyword">...</span>
0406                             <span class="string">'num_sys_nodes'</span>,num_nodes,<span class="string">'input_nodes'</span>,[]);
0407 <span class="keyword">end</span>
0408 
0409 <span class="comment">% make current node structs and their tpms</span>
0410 <span class="keyword">for</span> i = 1:num_nodes
0411     nodes(num_nodes + i) = struct(<span class="string">'num'</span>,num_nodes + i,<span class="string">'name'</span>,[num2str(i) <span class="string">'_c'</span>],<span class="string">'num_states'</span>,2,<span class="keyword">...</span>
0412                             <span class="string">'state_names'</span>,{{<span class="string">'0'</span> <span class="string">'1'</span>}},<span class="string">'logic_type'</span>,logic_types{i},<span class="string">'cpt'</span>,[],<span class="keyword">...</span>
0413                             <span class="string">'num_sys_nodes'</span>,num_nodes,<span class="string">'input_nodes'</span>,[]);
0414     input_nodes = 1:num_nodes;
0415     input_nodes_indices = input_nodes(logical(connectivity_matrix(i,:)));
0416     nodes(num_nodes + i).input_nodes = input_nodes_indices;
0417     nodes(num_nodes + i).cpt = <a href="cpt_factory_tpm.html" class="code" title="function cpt = cpt_factory_tpm(this_node, inputs, nodes, num_total_nodes, tpm)">cpt_factory_tpm</a>(nodes(num_nodes + i), input_nodes_indices, nodes, 2*num_nodes, tpm);
0418 <span class="keyword">end</span>
0419 
0420 assignin(<span class="string">'base'</span>,<span class="string">'nodes'</span>,nodes)
0421 explorer_handle = findall(0,<span class="string">'tag'</span>,<span class="string">'iit_explorer'</span>);
0422 delete(explorer_handle)
0423 
0424 drawnow
0425 
0426 <a href="iit_run.html" class="code" title="function iit_run(tpm, in_connect_mat, current_state, in_noise, in_options, in_nodes, past_state)">iit_run</a>(tpm,connectivity_matrix,current_state,noise,options,nodes,past_state);
0427 <span class="comment">%--------------------------------------------------------------------------</span>
0428 
0429 <span class="comment">%--------------------------------------------------------------------------</span>
0430 <a name="_sub13" href="#_subfunctions" class="code">function noise_Callback(hObject, eventdata, handles)</a>
0431 <span class="comment">% hObject    handle to noise (see GCBO)</span>
0432 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0433 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0434 
0435 <span class="comment">% Hints: get(hObject,'String') returns contents of noise as text</span>
0436 <span class="comment">%        str2double(get(hObject,'String')) returns contents of noise as a double</span>
0437 
0438 <span class="keyword">if</span> isnan(str2double(get(hObject,<span class="string">'String'</span>)))
0439     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Noise must be a real number in [0,.5].'</span>);
0440     set(hObject,<span class="string">'String'</span>,<span class="string">'0'</span>);
0441 <span class="keyword">else</span>
0442     noise = str2double(get(hObject,<span class="string">'String'</span>));
0443     <span class="keyword">if</span> noise &lt; 0
0444         set(handles.warning,<span class="string">'String'</span>,<span class="string">'Noise must be in [0,.5].'</span>);
0445         set(hObject,<span class="string">'String'</span>,<span class="string">'0'</span>);
0446     <span class="keyword">elseif</span> noise &gt; .5
0447         set(handles.warning,<span class="string">'String'</span>,<span class="string">'Noise must be in [0,.5].'</span>);
0448         set(hObject,<span class="string">'String'</span>,<span class="string">'.5'</span>);
0449     <span class="keyword">else</span>
0450         set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0451     <span class="keyword">end</span>
0452 <span class="keyword">end</span>
0453 
0454 <a href="#_sub26" class="code" title="subfunction update_tpm_from_connections_logic(handles)">update_tpm_from_connections_logic</a>(handles)
0455 
0456 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0457 <a name="_sub14" href="#_subfunctions" class="code">function noise_CreateFcn(hObject, eventdata, handles)</a>
0458 <span class="comment">% hObject    handle to noise (see GCBO)</span>
0459 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0460 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0461 
0462 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0463 <span class="comment">%       See ISPC and COMPUTER.</span>
0464 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0465     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0466 <span class="keyword">end</span>
0467 <span class="comment">%--------------------------------------------------------------------------</span>
0468 
0469 <span class="comment">%--------------------------------------------------------------------------</span>
0470 <span class="comment">% --- Executes when entered data in editable cell(s) in TPM.</span>
0471 <a name="_sub15" href="#_subfunctions" class="code">function TPM_CellEditCallback(hObject, eventdata, handles)</a>
0472 <span class="comment">% hObject    handle to TPM (see GCBO)</span>
0473 <span class="comment">% eventdata  structure with the following fields (see UITABLE)</span>
0474 <span class="comment">%    Indices: row and column indices of the cell(s) edited</span>
0475 <span class="comment">%    PreviousData: previous data for the cell(s) edited</span>
0476 <span class="comment">%    EditData: string(s) entered by the user</span>
0477 <span class="comment">%    NewData: EditData or its converted form set on the Data property. Empty if Data was not changed</span>
0478 <span class="comment">%    Error: error string when failed to convert EditData to appropriate value for Data</span>
0479 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0480 
0481 tpm = get(hObject,<span class="string">'Data'</span>);
0482 tpm_choices = cellstr(get(handles.tpm_type_menu,<span class="string">'String'</span>));
0483 tpm_choice = tpm_choices{get(handles.tpm_type_menu,<span class="string">'Value'</span>)};
0484 
0485 <span class="keyword">if</span> any(isnan(eventdata.NewData) || any(eventdata.NewData &lt; 0) || any(eventdata.NewData &gt; 1))
0486     
0487     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Entries in the TPM must be real numbers in [0,1].'</span>);
0488     tpm(eventdata.Indices(1),eventdata.Indices(2)) = eventdata.PreviousData;
0489     set(hObject,<span class="string">'Data'</span>,tpm);
0490     
0491 <span class="keyword">elseif</span> strcmp(tpm_choice,<span class="string">'State X State'</span>) &amp;&amp; any(sum(tpm,2) ~= 1)
0492     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Rows in the TPM must sum to 1'</span>);
0493 <span class="keyword">else</span> 
0494     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0495 <span class="keyword">end</span>
0496 
0497 <span class="comment">%--------------------------------------------------------------------------</span>
0498 <span class="comment">% --- Executes when entered data in editable cell(s) in cur_state.</span>
0499 <a name="_sub16" href="#_subfunctions" class="code">function cur_state_CellEditCallback(hObject, eventdata, handles)</a>
0500 <span class="comment">% hObject    handle to cur_state (see GCBO)</span>
0501 <span class="comment">% eventdata  structure with the following fields (see UITABLE)</span>
0502 <span class="comment">%    Indices: row and column indices of the cell(s) edited</span>
0503 <span class="comment">%    PreviousData: previous data for the cell(s) edited</span>
0504 <span class="comment">%    EditData: string(s) entered by the user</span>
0505 <span class="comment">%    NewData: EditData or its converted form set on the Data property. Empty if Data was not changed</span>
0506 <span class="comment">%    Error: error string when failed to convert EditData to appropriate value for Data</span>
0507 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0508 
0509 state_vec = get(hObject,<span class="string">'Data'</span>);
0510 <span class="keyword">if</span> (eventdata.NewData ~= 0 &amp;&amp; eventdata.NewData ~= 1)
0511     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Node states can only be 0 or 1'</span>)
0512     state_vec(eventdata.Indices(2)) = eventdata.PreviousData;
0513     set(hObject,<span class="string">'Data'</span>,state_vec)
0514 <span class="keyword">else</span>
0515     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0516 <span class="keyword">end</span>
0517 
0518 <span class="comment">% --- Executes when entered data in editable cell(s) in past_state.</span>
0519 <a name="_sub17" href="#_subfunctions" class="code">function past_state_CellEditCallback(hObject, eventdata, handles)</a>
0520 <span class="comment">% hObject    handle to cur_state (see GCBO)</span>
0521 <span class="comment">% eventdata  structure with the following fields (see UITABLE)</span>
0522 <span class="comment">%    Indices: row and column indices of the cell(s) edited</span>
0523 <span class="comment">%    PreviousData: previous data for the cell(s) edited</span>
0524 <span class="comment">%    EditData: string(s) entered by the user</span>
0525 <span class="comment">%    NewData: EditData or its converted form set on the Data property. Empty if Data was not changed</span>
0526 <span class="comment">%    Error: error string when failed to convert EditData to appropriate value for Data</span>
0527 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0528 
0529 state_vec = get(hObject,<span class="string">'Data'</span>);
0530 <span class="keyword">if</span> (eventdata.NewData ~= 0 &amp;&amp; eventdata.NewData ~= 1)
0531     
0532     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Node states can only be 0 or 1'</span>)
0533     state_vec(eventdata.Indices(2)) = eventdata.PreviousData;
0534     set(hObject,<span class="string">'Data'</span>,state_vec)
0535 <span class="keyword">else</span>
0536     
0537     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0538     
0539 <span class="keyword">end</span>
0540 <span class="comment">%--------------------------------------------------------------------------</span>
0541 
0542 <span class="comment">%--------------------------------------------------------------------------</span>
0543 <span class="comment">% --- Executes on button press in upload_tpm.</span>
0544 <a name="_sub18" href="#_subfunctions" class="code">function upload_tpm_Callback(hObject, eventdata, handles)</a>
0545 <span class="comment">% hObject    handle to upload_tpm (see GCBO)</span>
0546 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0547 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0548 filename = uigetfile(<span class="string">'*.mat'</span>);
0549 <span class="keyword">if</span> (filename ~= 0)  
0550     load(filename)
0551     <span class="keyword">if</span> exist(<span class="string">'tpm'</span>)
0552         <span class="keyword">if</span> size(tpm,2) == size(tpm,1) &amp;&amp; <a href="isposintscalar.html" class="code" title="function r = isposintscalar(s)">isposintscalar</a>(log2(size(tpm,1)))
0553             num_nodes = log2(size(tpm,1));
0554             set(handles.num_nodes,<span class="string">'String'</span>,num2str(num_nodes))
0555             set(handles.tpm_type_menu,<span class="string">'Value'</span>,1); <span class="comment">% state x state</span>
0556             set(handles.TPM,<span class="string">'Data'</span>,tpm);
0557             <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles,<span class="string">'State X State'</span>);
0558         <span class="keyword">elseif</span> size(tpm,1) == 2^size(tpm,2)
0559             num_nodes = size(tpm,2);
0560             set(handles.num_nodes,<span class="string">'String'</span>,num2str(num_nodes))
0561             set(handles.tpm_type_menu,<span class="string">'Value'</span>,2); <span class="comment">% state x node</span>
0562             set(handles.TPM,<span class="string">'Data'</span>,tpm);
0563             <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles,<span class="string">'State X Node'</span>);
0564         <span class="keyword">end</span>
0565 
0566         <a href="#_sub8" class="code" title="subfunction updateCurrentStateView(handles)">updateCurrentStateView</a>(handles)
0567         <a href="#_sub9" class="code" title="subfunction updatePastStateView(handles)">updatePastStateView</a>(handles)
0568         
0569         set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0570     <span class="keyword">else</span>
0571         set(handles.warning,<span class="string">'String'</span>,<span class="string">'No variable named ''tpm'' in that data file.'</span>)
0572     <span class="keyword">end</span>
0573     
0574     tpm_def = 1;
0575     set(handles.net_definition_method,<span class="string">'Value'</span>,tpm_def);
0576     <a href="#_sub5" class="code" title="subfunction net_definition_method_Callback(hObject, eventdata, handles)">net_definition_method_Callback</a>(handles.net_definition_method, eventdata, handles);
0577     set(handles.num_nodes,<span class="string">'String'</span>,num_nodes)
0578     <a href="#_sub3" class="code" title="subfunction num_nodes_Callback(hObject, eventdata, handles)">num_nodes_Callback</a>(handles.num_nodes,eventdata,handles)
0579     
0580 <span class="keyword">end</span>
0581     
0582 
0583 <span class="comment">% --- Executes on selection change in tpm_type_menu.</span>
0584 <a name="_sub19" href="#_subfunctions" class="code">function tpm_type_menu_Callback(hObject, eventdata, handles)</a>
0585 <span class="comment">% hObject    handle to tpm_type_menu (see GCBO)</span>
0586 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0587 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0588 
0589 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns tpm_type_menu contents as cell array</span>
0590 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from tpm_type_menu</span>
0591 
0592 tpm_choices = cellstr(get(hObject,<span class="string">'String'</span>));
0593 tpm_choice = tpm_choices{get(hObject,<span class="string">'Value'</span>)};
0594 
0595 <span class="keyword">if</span> strcmp(tpm_choice,<span class="string">'State X State'</span>) || strcmp(tpm_choice,<span class="string">'State X Node'</span>)
0596     
0597     set(handles.tpm_text,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0598     set(handles.TPM,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0599     set(handles.connect_mat_title,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0600     set(handles.connectivity_mat,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0601     set(handles.logic_types,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0602     set(handles.logic_text,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0603     set(handles.noise,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0604     set(handles.noise_text,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0605     
0606 <span class="keyword">else</span>
0607     
0608     set(handles.tpm_text,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0609     set(handles.TPM,<span class="string">'Visible'</span>,<span class="string">'off'</span>)
0610     set(handles.connect_mat_title,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0611     set(handles.connectivity_mat,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0612     set(handles.logic_types,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0613     set(handles.logic_text,<span class="string">'Visible'</span>,<span class="string">'on'</span>)   
0614     set(handles.noise,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0615     set(handles.noise_text,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
0616 <span class="keyword">end</span>  
0617 
0618 tpm = get(handles.TPM,<span class="string">'Data'</span>);
0619 num_nodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0620 num_states = 2^num_nodes;
0621 
0622 <span class="comment">% if we want state x state and we were in state x node</span>
0623 <span class="keyword">if</span> strcmp(tpm_choice,<span class="string">'State X State'</span>) &amp;&amp; size(tpm,2) == num_nodes
0624     
0625     new_tpm = ones(num_states);
0626     
0627     <span class="comment">% create state x state tpm</span>
0628     <span class="keyword">for</span> i = 1:num_states
0629         <span class="keyword">for</span> j = 1:num_states
0630 
0631             state = num2str(char(<a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(j-1,num_nodes)'+<span class="string">'0'</span>));
0632             
0633             <span class="keyword">for</span> k = 1:num_nodes
0634                 <span class="keyword">if</span> strcmp(state(k),<span class="string">'1'</span>)
0635                     new_tpm(i,j) = new_tpm(i,j) * tpm(i,k);
0636                 <span class="keyword">else</span>
0637                     new_tpm(i,j) = new_tpm(i,j) * (1 - tpm(i,k));
0638                 <span class="keyword">end</span>
0639             <span class="keyword">end</span>
0640         <span class="keyword">end</span>
0641     <span class="keyword">end</span>
0642     
0643     set(handles.TPM,<span class="string">'Data'</span>,new_tpm)
0644     
0645 <span class="comment">% if we want state x node and we were in state x state</span>
0646 <span class="keyword">elseif</span> strcmp(tpm_choice,<span class="string">'State X Node'</span>) &amp;&amp; size(tpm,2) == num_states
0647     
0648     user_response = <a href="confirm_tpm_switch.html" class="code" title="function varargout = confirm_tpm_switch(varargin)">confirm_tpm_switch</a>(<span class="string">'Title'</span>,<span class="string">'Confirm TPM Change'</span>);
0649     <span class="keyword">switch</span> lower(user_response)
0650         <span class="keyword">case</span> <span class="string">'no'</span>
0651             <span class="keyword">return</span>
0652         <span class="keyword">case</span> <span class="string">'yes'</span>         
0653         new_tpm = zeros(num_states,num_nodes);
0654         <span class="keyword">for</span> i = 1:num_states
0655             <span class="keyword">for</span> j = 1:num_nodes
0656                 <span class="keyword">for</span> k = 1:num_states
0657                     state = char(<a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(k-1,num_nodes)'+<span class="string">'0'</span>);
0658                     <span class="keyword">if</span> strcmp(state(j),<span class="string">'1'</span>)
0659                         new_tpm(i,j) = new_tpm(i,j) + tpm(i,k);
0660                     <span class="keyword">end</span>
0661                 <span class="keyword">end</span>
0662             <span class="keyword">end</span>
0663         <span class="keyword">end</span>
0664         set(handles.TPM,<span class="string">'Data'</span>,new_tpm)
0665     <span class="keyword">end</span>
0666 <span class="keyword">end</span>
0667 
0668 <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles, tpm_choice)
0669 
0670 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0671 <a name="_sub20" href="#_subfunctions" class="code">function tpm_type_menu_CreateFcn(hObject, eventdata, handles)</a>
0672 <span class="comment">% hObject    handle to tpm_type_menu (see GCBO)</span>
0673 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0674 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0675 
0676 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0677 <span class="comment">%       See ISPC and COMPUTER.</span>
0678 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0679     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0680 <span class="keyword">end</span>
0681 <span class="comment">%--------------------------------------------------------------------------</span>
0682 
0683 
0684 <span class="comment">%--------------------------------------------------------------------------</span>
0685 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0686 <a name="_sub21" href="#_subfunctions" class="code">function NetworkDefinition_CreateFcn(hObject, eventdata, handles)</a>
0687 <span class="comment">% hObject    handle to NetworkDefinition (see GCBO)</span>
0688 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0689 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0690 <span class="comment">%--------------------------------------------------------------------------</span>
0691 
0692 <span class="comment">%--------------------------------------------------------------------------</span>
0693 <span class="comment">% --- Executes when entered data in editable cell(s) in connectivity_mat.</span>
0694 <a name="_sub22" href="#_subfunctions" class="code">function connectivity_mat_CellEditCallback(hObject, eventdata, handles)</a>
0695 <span class="comment">% hObject    handle to connectivity_mat (see GCBO)</span>
0696 <span class="comment">% eventdata  structure with the following fields (see UITABLE)</span>
0697 <span class="comment">%    Indices: row and column indices of the cell(s) edited</span>
0698 <span class="comment">%    PreviousData: previous data for the cell(s) edited</span>
0699 <span class="comment">%    EditData: string(s) entered by the user</span>
0700 <span class="comment">%    NewData: EditData or its converted form set on the Data property. Empty if Data was not changed</span>
0701 <span class="comment">%    Error: error string when failed to convert EditData to appropriate value for Data</span>
0702 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0703 connectivity_mat = get(hObject,<span class="string">'Data'</span>);
0704 <span class="keyword">if</span> (eventdata.NewData ~= 0 &amp;&amp; eventdata.NewData ~= 1)
0705   
0706     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Entries in connectivity matrix can only be 0 or 1'</span>)
0707     connectivity_mat(eventdata.Indices(1),eventdata.Indices(2)) = eventdata.PreviousData;
0708     set(hObject,<span class="string">'Data'</span>,connectivity_mat)
0709 <span class="keyword">else</span>
0710     
0711     <span class="keyword">if</span> strcmp(get(handles.logic_types,<span class="string">'Enable'</span>),<span class="string">'on'</span>)
0712         <a href="#_sub26" class="code" title="subfunction update_tpm_from_connections_logic(handles)">update_tpm_from_connections_logic</a>(handles)
0713     <span class="keyword">end</span>
0714     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);   
0715 <span class="keyword">end</span>
0716 <span class="comment">% update_tpm_from_connections_logic(handles)</span>
0717 
0718 <span class="comment">% --- Executes on button press in upload_connectivity.</span>
0719 <a name="_sub23" href="#_subfunctions" class="code">function upload_connectivity_Callback(hObject, eventdata, handles)</a>
0720 <span class="comment">% hObject    handle to upload_connectivity (see GCBO)</span>
0721 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0722 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0723 
0724 filename = uigetfile(<span class="string">'*.mat'</span>);
0725 <span class="keyword">if</span> size(get(handles.TPM,<span class="string">'Data'</span>),2) == str2double(get(handles.num_nodes,<span class="string">'String'</span>))
0726     tpm_choice = <span class="string">'State X Node'</span>;
0727 <span class="keyword">else</span>
0728     tpm_choice = <span class="string">'State X State'</span>;
0729 <span class="keyword">end</span>
0730 
0731 <span class="keyword">if</span> (filename ~= 0)  
0732     load(filename)
0733     <span class="keyword">if</span> exist(<span class="string">'connectivity_mat'</span>)
0734         <span class="keyword">if</span> size(connectivity_mat,1) == size(connectivity_mat,2)
0735 
0736             num_nodes = size(connectivity_mat,1);
0737             set(handles.num_nodes,<span class="string">'String'</span>,num2str(num_nodes))
0738             set(handles.connectivity_mat,<span class="string">'Data'</span>,connectivity_mat)
0739             
0740             <a href="#_sub8" class="code" title="subfunction updateCurrentStateView(handles)">updateCurrentStateView</a>(handles)
0741             <a href="#_sub9" class="code" title="subfunction updatePastStateView(handles)">updatePastStateView</a>(handles)
0742             <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles,tpm_choice)
0743             <a href="#_sub24" class="code" title="subfunction updateConnectivityView(handles)">updateConnectivityView</a>(handles);
0744             set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0745             
0746 <span class="comment">%             tpm_def = 1;</span>
0747 <span class="comment">%             set(handles.net_definition,'Value',tpm_def);</span>
0748 <span class="comment">%             net_definition_method_Callback(hObject, eventdata, handles);</span>
0749         
0750         <span class="keyword">else</span>
0751             set(handles.warning,<span class="string">'Connectivity Matrix is not square'</span>)
0752         <span class="keyword">end</span>
0753     <span class="keyword">else</span>
0754         set(handles.warning,<span class="string">'String'</span>,<span class="string">'No variable named ''connectivity_mat'' in that data file.'</span>)
0755     <span class="keyword">end</span>
0756     logical_def = 1;
0757     set(handles.net_definition_method,<span class="string">'Value'</span>,logical_def);
0758     <a href="#_sub5" class="code" title="subfunction net_definition_method_Callback(hObject, eventdata, handles)">net_definition_method_Callback</a>(hObject, eventdata, handles);
0759 <span class="keyword">end</span>
0760 
0761 <a name="_sub24" href="#_subfunctions" class="code">function updateConnectivityView(handles)</a>
0762 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0763 connect_mat_old = get(handles.connectivity_mat,<span class="string">'Data'</span>);
0764 connect_mat_size_old = size(connect_mat_old,1);
0765 
0766 <span class="comment">% increase size</span>
0767 <span class="keyword">if</span> nNodes &gt; connect_mat_size_old
0768     connect_mat_new = ones(nNodes);
0769     connect_mat_new(1:size(connect_mat_old,1),1:size(connect_mat_old,2)) = connect_mat_old;
0770 <span class="comment">% decrease size</span>
0771 <span class="keyword">else</span>
0772     <span class="comment">% resize</span>
0773     connect_mat_new = connect_mat_old(1:nNodes,1:nNodes);
0774 <span class="keyword">end</span>
0775 set(handles.connectivity_mat,<span class="string">'Data'</span>,connect_mat_new);
0776 set(handles.connectivity_mat,<span class="string">'ColumnEditable'</span>,true(1,nNodes));
0777 <span class="keyword">if</span> strcmp(get(handles.logic_types,<span class="string">'Enable'</span>),<span class="string">'on'</span>)
0778     <a href="#_sub26" class="code" title="subfunction update_tpm_from_connections_logic(handles)">update_tpm_from_connections_logic</a>(handles)
0779 <span class="keyword">end</span>
0780 <span class="comment">%--------------------------------------------------------------------------</span>
0781 
0782 <span class="comment">%--------------------------------------------------------------------------</span>
0783 <span class="comment">% --- Executes when entered data in editable cell(s) in logic_types.</span>
0784 <a name="_sub25" href="#_subfunctions" class="code">function logic_types_CellEditCallback(hObject, eventdata, handles)</a>
0785 <span class="comment">% hObject    handle to logic_types (see GCBO)</span>
0786 <span class="comment">% eventdata  structure with the following fields (see UITABLE)</span>
0787 <span class="comment">%    Indices: row and column indices of the cell(s) edited</span>
0788 <span class="comment">%    PreviousData: previous data for the cell(s) edited</span>
0789 <span class="comment">%    EditData: string(s) entered by the user</span>
0790 <span class="comment">%    NewData: EditData or its converted form set on the Data property. Empty if Data was not changed</span>
0791 <span class="comment">%    Error: error string when failed to convert EditData to appropriate value for Data</span>
0792 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0793 logic_vec = get(hObject,<span class="string">'Data'</span>);
0794 <span class="keyword">if</span> (eventdata.NewData &lt; 0 || eventdata.NewData &gt; 30)
0795    
0796     set(handles.warning,<span class="string">'String'</span>,<span class="string">'Logic Types must be between 1 and 29'</span>)
0797     logic_vec(eventdata.Indices(2)) = eventdata.PreviousData;
0798     set(hObject,<span class="string">'Data'</span>,logic_vec)
0799     
0800 <span class="keyword">else</span>
0801     
0802     set(handles.warning,<span class="string">'String'</span>,<span class="string">''</span>);
0803     <a href="#_sub26" class="code" title="subfunction update_tpm_from_connections_logic(handles)">update_tpm_from_connections_logic</a>(handles)
0804     
0805 <span class="keyword">end</span>
0806 <span class="comment">%--------------------------------------------------------------------------</span>
0807 
0808 <span class="comment">%--------------------------------------------------------------------------</span>
0809 <a name="_sub26" href="#_subfunctions" class="code">function update_tpm_from_connections_logic(handles)</a>
0810 
0811 <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles, <span class="string">'State X Node'</span>)
0812 logic_types = get(handles.logic_types,<span class="string">'Data'</span>);
0813 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0814 new_tpm = zeros(2^nNodes,nNodes);
0815 connection_mat = get(handles.connectivity_mat,<span class="string">'Data'</span>);
0816 noise = str2double(get(handles.noise,<span class="string">'String'</span>));
0817 
0818 <span class="keyword">for</span> k = 1:2^nNodes
0819     x0 = <a href="trans2.html" class="code" title="function [binary] = trans2(value,length)">trans2</a>(k-1,nNodes);
0820     <span class="keyword">for</span> i = 1:nNodes
0821         i_vec = logical(connection_mat(i,:));
0822         input_vec = x0(i_vec);
0823         new_tpm(k,i) = <a href="logic_gates.html" class="code" title="function output = logic_gates(input,logic_type,in_noise)">logic_gates</a>(input_vec,logic_types(i),noise);
0824     <span class="keyword">end</span> 
0825 <span class="keyword">end</span>
0826 
0827 set(handles.TPM,<span class="string">'Data'</span>,new_tpm)
0828 
0829 <span class="comment">% this is a bit of hack since we set the new tpm as state X node :(</span>
0830 <span class="keyword">if</span>(get(handles.tpm_type_menu,<span class="string">'Value'</span>) == 1)   
0831     stateXnode_view = 2;
0832     set(handles.tpm_type_menu,<span class="string">'Value'</span>,stateXnode_view);
0833 <span class="keyword">end</span>
0834 <span class="comment">%--------------------------------------------------------------------------</span>
0835 
0836 <span class="comment">%--------------------------------------------------------------------------</span>
0837 <a name="_sub27" href="#_subfunctions" class="code">function updateLogicTypesView(handles)</a>
0838 nNodes = str2double(get(handles.num_nodes,<span class="string">'String'</span>));
0839 log_types_old = get(handles.logic_types,<span class="string">'Data'</span>);
0840 log_types_size_old = length(log_types_old);
0841 <span class="comment">% increase size</span>
0842 <span class="keyword">if</span> nNodes &gt; log_types_size_old
0843     log_types_new = ones(1,nNodes);
0844     log_types_new(1:log_types_size_old) = log_types_old;
0845 <span class="comment">% decrease size</span>
0846 <span class="keyword">else</span>  
0847     log_types_new = log_types_old(1:nNodes);
0848 <span class="keyword">end</span>
0849 set(handles.logic_types,<span class="string">'Data'</span>,log_types_new);
0850 set(handles.logic_types,<span class="string">'ColumnEditable'</span>,true(1,nNodes));
0851 <span class="comment">%--------------------------------------------------------------------------</span>
0852 
0853 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0854 <span class="comment">% All network option functions that are used                              %</span>
0855 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0856 
0857 <span class="comment">%Larissa: TODO: What to do when freezing??</span>
0858 <span class="comment">%--------------------------------------------------------------------------</span>
0859 <span class="comment">% --- Executes on selection change in state_option_menu.</span>
0860 <a name="_sub28" href="#_subfunctions" class="code">function state_option_menu_Callback(hObject, eventdata, handles)</a>
0861 <span class="comment">% hObject    handle to state_option_menu (see GCBO)</span>
0862 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0863 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0864 
0865 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns state_option_menu contents as cell array</span>
0866 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from state_option_menu</span>
0867 
0868 <span class="keyword">if</span> get(hObject,<span class="string">'Value'</span>) == 1
0869     set(handles.cur_state,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
0870 <span class="keyword">else</span>
0871     set(handles.cur_state,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
0872 <span class="keyword">end</span>
0873 
0874 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0875 <a name="_sub29" href="#_subfunctions" class="code">function state_option_menu_CreateFcn(hObject, eventdata, handles)</a>
0876 <span class="comment">% hObject    handle to state_option_menu (see GCBO)</span>
0877 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0878 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0879 
0880 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0881 <span class="comment">%       See ISPC and COMPUTER.</span>
0882 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0883     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0884 <span class="keyword">end</span>
0885 <span class="comment">%--------------------------------------------------------------------------</span>
0886 
0887 <span class="comment">%--------------------------------------------------------------------------</span>
0888 <span class="comment">% --- Executes on selection change in externalnodes_menu.</span>
0889 <a name="_sub30" href="#_subfunctions" class="code">function externalnodes_menu_Callback(hObject, eventdata, handles)</a>
0890 <span class="comment">% hObject    handle to normalization_menu (see GCBO)</span>
0891 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0892 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0893 
0894 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns normalization_menu contents as cell array</span>
0895 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from</span>
0896 <span class="comment">%        normalization_menu</span>
0897 op_extNodes = get(handles.ExtNodes_option_menu,<span class="string">'Value'</span>) - 1;
0898 <span class="keyword">if</span> op_extNodes &gt; 0
0899     set(handles.past_state,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0900     set(handles.past_state_text,<span class="string">'Visible'</span>,<span class="string">'Off'</span>)
0901 <span class="keyword">else</span>
0902     set(handles.past_state,<span class="string">'Visible'</span>,<span class="string">'On'</span>)
0903     set(handles.past_state_text,<span class="string">'Visible'</span>,<span class="string">'On'</span>)
0904 <span class="keyword">end</span>    
0905 
0906 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0907 <a name="_sub31" href="#_subfunctions" class="code">function externalnodes_menu_CreateFcn(hObject, eventdata, handles)</a>
0908 <span class="comment">% hObject    handle to normalization_menu (see GCBO)</span>
0909 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0910 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0911 
0912 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0913 <span class="comment">%       See ISPC and COMPUTER.</span>
0914 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0915     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0916 <span class="keyword">end</span>
0917 <span class="comment">%--------------------------------------------------------------------------</span>
0918 
0919 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0920 <span class="comment">% All network option functions that are not used                          %</span>
0921 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0922 
0923 
0924 <span class="comment">%--------------------------------------------------------------------------</span>
0925 <span class="comment">% --- Executes on selection change in big_phi_alg_menu.</span>
0926 <a name="_sub32" href="#_subfunctions" class="code">function big_phi_alg_menu_Callback(hObject, eventdata, handles)</a>
0927 <span class="comment">% hObject    handle to big_phi_alg_menu (see GCBO)</span>
0928 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0929 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0930 
0931 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns big_phi_alg_menu contents as cell array</span>
0932 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from big_phi_alg_menu</span>
0933 
0934 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0935 <a name="_sub33" href="#_subfunctions" class="code">function big_phi_alg_menu_CreateFcn(hObject, eventdata, handles)</a>
0936 <span class="comment">% hObject    handle to big_phi_alg_menu (see GCBO)</span>
0937 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0938 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0939 
0940 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0941 <span class="comment">%       See ISPC and COMPUTER.</span>
0942 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0943     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0944 <span class="keyword">end</span>
0945 <span class="comment">%--------------------------------------------------------------------------</span>
0946 
0947 <span class="comment">%--------------------------------------------------------------------------</span>
0948 <span class="comment">% --- Executes on selection change in big_phi_func_menu.</span>
0949 <a name="_sub34" href="#_subfunctions" class="code">function big_phi_func_menu_Callback(hObject, eventdata, handles)</a>
0950 <span class="comment">% hObject    handle to big_phi_func_menu (see GCBO)</span>
0951 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0952 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0953 
0954 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns big_phi_func_menu contents as cell array</span>
0955 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from big_phi_func_menu</span>
0956 
0957 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0958 <a name="_sub35" href="#_subfunctions" class="code">function big_phi_func_menu_CreateFcn(hObject, eventdata, handles)</a>
0959 <span class="comment">% hObject    handle to big_phi_func_menu (see GCBO)</span>
0960 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0961 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0962 
0963 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0964 <span class="comment">%       See ISPC and COMPUTER.</span>
0965 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0966     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0967 <span class="keyword">end</span>
0968 <span class="comment">%--------------------------------------------------------------------------</span>
0969 
0970 <span class="comment">%--------------------------------------------------------------------------</span>
0971 <span class="comment">% --- Executes on selection change in small_phi_func_menu.</span>
0972 <a name="_sub36" href="#_subfunctions" class="code">function small_phi_func_menu_Callback(hObject, eventdata, handles)</a>
0973 <span class="comment">% hObject    handle to small_phi_func_menu (see GCBO)</span>
0974 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0975 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0976 
0977 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns small_phi_func_menu contents as cell array</span>
0978 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from small_phi_func_menu</span>
0979 
0980 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0981 <a name="_sub37" href="#_subfunctions" class="code">function small_phi_func_menu_CreateFcn(hObject, eventdata, handles)</a>
0982 <span class="comment">% hObject    handle to small_phi_func_menu (see GCBO)</span>
0983 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0984 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0985 
0986 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0987 <span class="comment">%       See ISPC and COMPUTER.</span>
0988 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0989     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0990 <span class="keyword">end</span>
0991 <span class="comment">%--------------------------------------------------------------------------</span>
0992 
0993 <span class="comment">%--------------------------------------------------------------------------</span>
0994 <span class="comment">% --- Executes on selection change in complex_option_menu.</span>
0995 <a name="_sub38" href="#_subfunctions" class="code">function complex_option_menu_Callback(hObject, eventdata, handles)</a>
0996 <span class="comment">% hObject    handle to complex_option_menu (see GCBO)</span>
0997 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0998 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0999 
1000 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns complex_option_menu contents as cell array</span>
1001 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from complex_option_menu</span>
1002 
1003 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1004 <a name="_sub39" href="#_subfunctions" class="code">function complex_option_menu_CreateFcn(hObject, eventdata, handles)</a>
1005 <span class="comment">% hObject    handle to complex_option_menu (see GCBO)</span>
1006 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1007 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1008 
1009 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
1010 <span class="comment">%       See ISPC and COMPUTER.</span>
1011 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1012     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1013 <span class="keyword">end</span>
1014 <span class="comment">%--------------------------------------------------------------------------</span>
1015 
1016 <span class="comment">%--------------------------------------------------------------------------</span>
1017 <span class="comment">% --- Executes on selection change in normalization_menu.</span>
1018 <a name="_sub40" href="#_subfunctions" class="code">function normalization_menu_Callback(hObject, eventdata, handles)</a>
1019 <span class="comment">% hObject    handle to normalization_menu (see GCBO)</span>
1020 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1021 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1022 
1023 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns normalization_menu contents as cell array</span>
1024 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from normalization_menu</span>
1025 
1026 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1027 <a name="_sub41" href="#_subfunctions" class="code">function normalization_menu_CreateFcn(hObject, eventdata, handles)</a>
1028 <span class="comment">% hObject    handle to normalization_menu (see GCBO)</span>
1029 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1030 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1031 
1032 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
1033 <span class="comment">%       See ISPC and COMPUTER.</span>
1034 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1035     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1036 <span class="keyword">end</span>
1037 <span class="comment">%--------------------------------------------------------------------------</span>
1038 
1039 <span class="comment">%--------------------------------------------------------------------------</span>
1040 <span class="comment">% --- Executes on selection change in parallel_option_menu.</span>
1041 <a name="_sub42" href="#_subfunctions" class="code">function parallel_option_menu_Callback(hObject, eventdata, handles)</a>
1042 <span class="comment">% hObject    handle to parallel_option_menu (see GCBO)</span>
1043 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1044 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1045 
1046 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns parallel_option_menu contents as cell array</span>
1047 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from parallel_option_menu</span>
1048 
1049 
1050 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1051 <a name="_sub43" href="#_subfunctions" class="code">function parallel_option_menu_CreateFcn(hObject, eventdata, handles)</a>
1052 <span class="comment">% hObject    handle to parallel_option_menu (see GCBO)</span>
1053 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1054 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1055 
1056 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
1057 <span class="comment">%       See ISPC and COMPUTER.</span>
1058 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1059     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1060 <span class="keyword">end</span>
1061 <span class="comment">%--------------------------------------------------------------------------</span>
1062 
1063 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1064 <span class="comment">% Save and load                                                           %</span>
1065 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1066 <span class="comment">% --- Executes on button press in save_button.</span>
1067 <a name="_sub44" href="#_subfunctions" class="code">function save_button_Callback(hObject, eventdata, handles)</a>
1068 <span class="comment">% hObject    handle to save_button (see GCBO)</span>
1069 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1070 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1071 
1072 tpm = get(handles.TPM,<span class="string">'Data'</span>);
1073 tpm_view = get(handles.tpm_type_menu,<span class="string">'Value'</span>);
1074 logic_types = get(handles.logic_types,<span class="string">'Data'</span>);
1075 noise = get(handles.noise,<span class="string">'String'</span>);
1076 connectivity_mat = get(handles.connectivity_mat,<span class="string">'Data'</span>);
1077 cur_state = get(handles.cur_state,<span class="string">'Data'</span>);
1078 past_state = get(handles.past_state,<span class="string">'Data'</span>);
1079 net_definition = get(handles.net_definition_method,<span class="string">'Value'</span>);
1080 
1081 options_handles = findobj(<span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="string">'Parent'</span>,handles.Options);
1082 num_options = length(options_handles);
1083 options_tags = cell(num_options,1);
1084 options_values = zeros(num_options,1);
1085 <span class="keyword">for</span> i = 1:length(options_handles)
1086     options_tags{i} = get(options_handles(i),<span class="string">'Tag'</span>);
1087     options_values(i) = get(options_handles(i),<span class="string">'Value'</span>);
1088 <span class="keyword">end</span>
1089     
1090 variable_names = {<span class="string">'tpm'</span>,<span class="string">'tpm_view'</span>,<span class="string">'logic_types'</span>,<span class="string">'noise'</span>,<span class="string">'connectivity_mat'</span>,<span class="string">'cur_state'</span>,<span class="string">'past_state'</span>,<span class="string">'options_tags'</span>,<span class="string">'options_values'</span>,<span class="string">'net_definition'</span>};
1091 uisave(variable_names);
1092 
1093 <span class="comment">%--------------------------------------------------------------------------</span>
1094 <span class="comment">% --- Executes on button press in load_button.</span>
1095 <a name="_sub45" href="#_subfunctions" class="code">function load_button_Callback(hObject, eventdata, handles)</a>
1096 <span class="comment">% hObject    handle to load_button (see GCBO)</span>
1097 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1098 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1099 filename = uigetfile(<span class="string">'*.mat'</span>);
1100 <span class="keyword">if</span> (filename ~= 0)    
1101     load(filename)
1102     <span class="keyword">if</span> exist(<span class="string">'tpm'</span>)
1103         <span class="keyword">if</span> size(tpm,2) == size(tpm,1) &amp;&amp; <a href="isposintscalar.html" class="code" title="function r = isposintscalar(s)">isposintscalar</a>(log2(size(tpm,1)))
1104             num_nodes = log2(size(tpm,1));
1105             set(handles.num_nodes,<span class="string">'String'</span>,num2str(num_nodes))
1106             set(handles.tpm_type_menu,<span class="string">'Value'</span>,1); <span class="comment">% state x state</span>
1107             set(handles.TPM,<span class="string">'Data'</span>,tpm);
1108             <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles,<span class="string">'State X State'</span>);
1109         <span class="keyword">elseif</span> size(tpm,1) == 2^size(tpm,2)
1110             num_nodes = size(tpm,2);
1111             set(handles.num_nodes,<span class="string">'String'</span>,num2str(num_nodes))
1112             set(handles.tpm_type_menu,<span class="string">'Value'</span>,2); <span class="comment">% state x node</span>
1113             set(handles.TPM,<span class="string">'Data'</span>,tpm);
1114             <a href="#_sub7" class="code" title="subfunction updateTPMview(handles, tpm_choice)">updateTPMview</a>(handles,<span class="string">'State X Node'</span>);
1115         <span class="keyword">end</span>
1116     <span class="keyword">end</span>
1117        
1118     <span class="keyword">if</span> exist(<span class="string">'tpm_view'</span>)
1119         set(handles.tpm_type_menu,<span class="string">'Value'</span>,tpm_view);
1120     <span class="keyword">end</span>   
1121     <span class="keyword">if</span> exist(<span class="string">'logic_types'</span>)
1122         set(handles.logic_types,<span class="string">'Data'</span>,logic_types)
1123     <span class="keyword">end</span>
1124     <span class="keyword">if</span> exist(<span class="string">'noise'</span>)
1125         set(handles.noise,<span class="string">'String'</span>,noise)
1126     <span class="keyword">end</span>
1127     <span class="keyword">if</span> exist(<span class="string">'cur_state'</span>)
1128         set(handles.cur_state,<span class="string">'Data'</span>,cur_state);
1129     <span class="keyword">end</span>
1130     <span class="keyword">if</span> exist(<span class="string">'past_state'</span>)
1131         set(handles.past_state,<span class="string">'Data'</span>,past_state);        
1132     <span class="keyword">end</span>
1133     <span class="keyword">if</span> exist(<span class="string">'connectivity_mat'</span>)
1134         set(handles.connectivity_mat,<span class="string">'Data'</span>,connectivity_mat)
1135     <span class="keyword">end</span>    
1136     <span class="keyword">if</span> exist(<span class="string">'options_tags'</span>) &amp;&amp; exist(<span class="string">'options_values'</span>)      
1137         options_handles = findobj(<span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="string">'Parent'</span>,handles.Options);
1138         <span class="keyword">for</span> i = 1:length(options_handles)   
1139             tag = get(options_handles(i),<span class="string">'Tag'</span>);
1140             [found, index] = ismember(<span class="string">'options_tags'</span>, tag)
1141             <span class="keyword">if</span> found
1142                 set(options_handles(i),<span class="string">'Value'</span>,options_values(index))
1143             <span class="keyword">end</span>
1144         <span class="keyword">end</span>
1145     <span class="keyword">end</span>
1146     
1147     <span class="keyword">if</span> exist(<span class="string">'net_definition'</span>)
1148         set(handles.net_definition_method,<span class="string">'Value'</span>,net_definition)
1149     <span class="keyword">end</span>   
1150     <a href="#_sub5" class="code" title="subfunction net_definition_method_Callback(hObject, eventdata, handles)">net_definition_method_Callback</a>(hObject, eventdata, handles); 
1151     <a href="#_sub8" class="code" title="subfunction updateCurrentStateView(handles)">updateCurrentStateView</a>(handles)
1152     <a href="#_sub9" class="code" title="subfunction updatePastStateView(handles)">updatePastStateView</a>(handles)
1153     <a href="#_sub24" class="code" title="subfunction updateConnectivityView(handles)">updateConnectivityView</a>(handles);
1154     <a href="#_sub27" class="code" title="subfunction updateLogicTypesView(handles)">updateLogicTypesView</a>(handles);       
1155 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Tue 14-Jan-2014 18:13:14 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>